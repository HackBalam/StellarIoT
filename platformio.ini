; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

;[env:esp32dev]
;platform = espressif32
;board = esp32dev
;framework = arduino

; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32

; Configuración base para ESP32
[env:esp32]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; Flags de compilación
build_flags = 
    -DCORE_DEBUG_LEVEL=3          ; Nivel de debug (0-5)
    -DBOARD_HAS_PSRAM             ; Si tu ESP32 tiene PSRAM
    -Os                            ; Optimizar para tamaño
    -Wall                          ; Mostrar todos los warnings
    -Wextra                        ; Warnings extra
    -DSTELLAR_IOT_VERSION="0.1.0" ; Versión del SDK

; Dependencias externas
lib_deps = 
    bblanchon/ArduinoJson@^6.21.3
    rweather/Crypto@^0.4.0

; Configuración de monitor serial
monitor_filters = 
    esp32_exception_decoder       ; Decodifica excepciones
    time                          ; Timestamp en logs

; Para testing
test_framework = unity
test_build_src = yes

; Configuración para upload
upload_speed = 115200
upload_port = COM10      ; Cambiar según tu sistema
monitor_port = COM10     ; Windows: COM3
                                   ; Mac: /dev/cu.usbserial-*

; Entorno para testnet (desarrollo)
[env:esp32_testnet]
extends = env:esp32
build_flags = 
    ${env:esp32.build_flags}
    -DSTELLAR_NETWORK_TESTNET

; Entorno para mainnet (producción)
[env:esp32_mainnet]
extends = env:esp32
build_flags = 
    ${env:esp32.build_flags}
    -DSTELLAR_NETWORK_MAINNET